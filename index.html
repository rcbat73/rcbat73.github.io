<!-- <!DOCTYPE html>
<html lang="en">
	<head>
		<title>AR.js test</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
		<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
		<script src="js/gesture-detector.js"></script>
    	<script src="js/gesture-handler.js"></script>
	</head>
	  
	<body>
		<script>
			AFRAME.registerComponent('collider-check', {
				dependencies: ['raycaster'],

				init: function () {
					this.el.addEventListener('raycaster-intersection', function () {
					console.log('Player hit something!');
					});
				}
			});
		</script>
		<a-scene
			arjs
			embedded
			renderer="logarithmicDepthBuffer: true;"
			vr-mode-ui="enabled: false"
			gesture-detector
			id="scene"
			cursor-listener
		>
			<a-assets>
				<a-asset id="cesium-man" src="CesiumMan.glb"></a-asset>
			</a-assets>
			<a-entity
				id="walker"
				gltf-model="#cesium-man"
				position="0 0 -5"
				scale="0.5 0.5 0.5"
				animation-mixer
				gesture-handler
				
			>
			</a-entity>	
			<a-entity camera raycaster cursor="fuse:false"></a-entity>
			<a-ring id="cursor" class="clickable" radius-inner="0.1" radius-outer="0.2"  
					color="teal" position="0 -0.8 -5" rotation="-90 0 0">
			</a-ring>					
		</a-scene>
	</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
	<head>
		<title></title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
		<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
		<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
		<script>
			AFRAME.registerComponent('collider-check', {
				dependencies: ['raycaster'],

				init: function () {
					this.el.addEventListener('raycaster-intersection', function (evt) {
						console.log('Player hit something!');
					});

					this.el.addEventListener('raycaster-intersection-cleared', function (evt) {
						console.log('Player does not hit something!');
					});    
				}
			});
			AFRAME.registerComponent('raycaster-listen', {
				dependencies: ['raycaster'],
				init: function () {
					this.el.addEventListener('raycaster-intersected', evt => {
						this.raycaster = evt.detail.el;
					});

					this.el.addEventListener('raycaster-intersected-cleared', evt => {
						this.raycaster = null;
					});			
				},
				tick: function () {
					if (!this.raycaster) { return; }  // Not intersecting.

					let intersection = this.raycaster.components.raycaster.getIntersection(this.el);
					if (!intersection) { return; }
					this.el.setAttribute('material', 'color: green');
					this.el.setAttribute('position', intersection.point);
				}
			});
		</script>
	</head>
	<body>
		<a-scene ar>
			<a-entity id="player" collider-check>
				<a-entity ar-raycaster raycaster="objects: .collidable" position="0 -0.9 -5" rotation="90 0 0"></a-entity>
			  </a-entity>
			<a-entity id="mark" class="collidable" geometry="primitive: box" position="1 0 -10" material="color: red" raycaster-listen></a-entity>
			<!-- <a-entity camera look-controls position="0 1.6 0"></a-entity> -->
		</a-scene>
	</body>
</html>
